{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Chat;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _StyleSheet = _interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));\nvar _Text = _interopRequireDefault(require(\"react-native-web/dist/exports/Text\"));\nvar _View = _interopRequireDefault(require(\"react-native-web/dist/exports/View\"));\nvar _Button = _interopRequireDefault(require(\"react-native-web/dist/exports/Button\"));\nvar _TouchableOpacity = _interopRequireDefault(require(\"react-native-web/dist/exports/TouchableOpacity\"));\nvar _reactNativeGiftedChat = require(\"react-native-gifted-chat\");\nvar _firebase = require(\"../config/firebase\");\nvar _native = require(\"@react-navigation/native\");\nvar _reactNativeElements = require(\"react-native-elements\");\nvar _firestore = require(\"firebase/firestore\");\nvar _ReplyMessageBar = _interopRequireDefault(require(\"../components/ReplyMessageBar\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _jsxFileName = \"/home/joshua/sana-app/sana/screens/Chat.js\";\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nfunction Chat(_ref) {\n  var _route$params,\n    _this = this,\n    _auth$currentUser3,\n    _auth$currentUser4;\n  var navigation = _ref.navigation;\n  var route = (0, _native.useRoute)();\n  var _useState = (0, _react.useState)(0),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    someoneElseTyping = _useState2[0],\n    setSomeoneElseTyping = _useState2[1];\n  var _useState3 = (0, _react.useState)([]),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    messages = _useState4[0],\n    setMessages = _useState4[1];\n  var _useState5 = (0, _react.useState)([]),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    replyMessage = _useState6[0],\n    setReplyMessage = _useState6[1];\n  var _useState7 = (0, _react.useState)(false),\n    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n    showEmojiPicker = _useState8[0],\n    setShowEmojiPicker = _useState8[1];\n  var clearReplyMessage = function clearReplyMessage() {\n    return setReplyMessage(null);\n  };\n  var cid = (_route$params = route.params) == null ? void 0 : _route$params.cid;\n  var renderReplyMessageView = function renderReplyMessageView(props) {\n    if (typeof props.currentMessage.replyMessage == 'string') {\n      return (0, _jsxRuntime.jsxs)(_View.default, {\n        style: styles.replyMessageContainer,\n        children: [(0, _jsxRuntime.jsx)(_Text.default, {\n          children: props.currentMessage.replyMessage\n        }), (0, _jsxRuntime.jsx)(_View.default, {\n          style: styles.replyMessageDivider\n        })]\n      });\n    }\n  };\n  var renderAccessory = function renderAccessory() {\n    return (0, _jsxRuntime.jsx)(_ReplyMessageBar.default, {\n      message: {\n        text: replyMessage\n      },\n      clearReply: clearReplyMessage\n    });\n  };\n  (0, _react.useLayoutEffect)(function () {\n    var collectionRef = (0, _firestore.collection)(_firebase.database, \"chat\", cid, \"chat\");\n    var quer = (0, _firestore.query)(collectionRef, (0, _firestore.orderBy)('createdAt', 'desc'));\n    var unsubscribe = (0, _firestore.onSnapshot)(quer, function (snapshot) {\n      setMessages(snapshot.docs.map(function (doc) {\n        return {\n          _id: doc.id,\n          createdAt: doc.data().createdAt.toDate(),\n          text: doc.data().text,\n          user: doc.data().user,\n          replyMessage: doc.data().replyMessage\n        };\n      }));\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  (0, _react.useLayoutEffect)(function () {\n    var collectionRef = (0, _firestore.collection)(_firebase.database, \"chat\", cid, \"typers\");\n    var quer = (0, _firestore.query)(collectionRef);\n    var unsubscribe = (0, _firestore.onSnapshot)(quer, function (snapshot) {\n      var isSomeoneElseTyping = false;\n      snapshot.docs.forEach(function (doc) {\n        var _auth$currentUser;\n        console.log(doc.data().isTyping + \" \" + doc.id);\n        isSomeoneElseTyping |= doc.data().isTyping && doc.id != (_firebase.auth == null ? void 0 : (_auth$currentUser = _firebase.auth.currentUser) == null ? void 0 : _auth$currentUser.uid);\n      });\n      setSomeoneElseTyping(isSomeoneElseTyping);\n    });\n    return unsubscribe;\n  }, []);\n  var _onSend = (0, _react.useCallback)(function () {\n    var messages = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    if (replyMessage) {\n      messages[0].replyMessage = replyMessage;\n    }\n    setMessages(function (previousMessages) {\n      return _reactNativeGiftedChat.GiftedChat.append(previousMessages, messages);\n    });\n    var _messages$ = messages[0],\n      _id = _messages$._id,\n      createdAt = _messages$.createdAt,\n      text = _messages$.text,\n      user = _messages$.user;\n    (0, _firestore.addDoc)((0, _firestore.collection)(_firebase.database, 'chat', cid, \"chat\"), {\n      _id: _id,\n      createdAt: createdAt,\n      text: text,\n      user: user,\n      replyMessage: replyMessage\n    });\n  });\n  var notifyTyping = function notifyTyping(args) {\n    var _auth$currentUser2;\n    var docRef = (0, _firestore.doc)(_firebase.database, \"chat\", cid, \"typers\", _firebase.auth == null ? void 0 : (_auth$currentUser2 = _firebase.auth.currentUser) == null ? void 0 : _auth$currentUser2.uid);\n    if (args != \"\") (0, _firestore.setDoc)(docRef, {\n      isTyping: 1\n    });else (0, _firestore.setDoc)(docRef, {\n      isTyping: 0\n    });\n  };\n  function testo() {\n    return _testo.apply(this, arguments);\n  }\n  function _testo() {\n    _testo = (0, _asyncToGenerator2.default)(function* () {\n      var docSnap = yield (0, _firestore.getDoc)(typerRef);\n      if (docSnap.exists()) {}\n    });\n    return _testo.apply(this, arguments);\n  }\n  var renderSend = function renderSend(props) {\n    return (0, _jsxRuntime.jsxs)(_View.default, {\n      style: {\n        flexDirection: 'row'\n      },\n      children: [(0, _jsxRuntime.jsx)(_reactNativeGiftedChat.Send, Object.assign({}, props, {\n        children: (0, _jsxRuntime.jsx)(_View.default, {\n          style: styles.sendContainer,\n          children: (0, _jsxRuntime.jsx)(_reactNativeElements.Icon, {\n            type: \"font-awesome\",\n            name: \"send\",\n            size: 28,\n            color: \"orange\"\n          })\n        })\n      })), (0, _jsxRuntime.jsx)(_TouchableOpacity.default, {\n        onPress: function onPress() {\n          return setShowEmojiPicker(function (value) {\n            return value;\n          });\n        },\n        children: (0, _jsxRuntime.jsx)(_reactNativeElements.Icon, {\n          type: \"font-awesome\",\n          name: \"smile-o\",\n          size: 28,\n          color: \"gray\"\n        })\n      })]\n    });\n  };\n  return (0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {\n    children: [(0, _jsxRuntime.jsx)(_reactNativeGiftedChat.GiftedChat, {\n      messages: messages,\n      onSend: function onSend(messages) {\n        return _onSend(messages);\n      },\n      user: {\n        _id: _firebase.auth == null ? void 0 : (_auth$currentUser3 = _firebase.auth.currentUser) == null ? void 0 : _auth$currentUser3.email,\n        name: _firebase.auth == null ? void 0 : (_auth$currentUser4 = _firebase.auth.currentUser) == null ? void 0 : _auth$currentUser4.email\n      },\n      renderUsernameOnMessage: true,\n      renderSend: renderSend,\n      onPress: function onPress(_, message) {\n        return setReplyMessage(message.text);\n      },\n      renderAccessory: renderAccessory,\n      renderCustomView: renderReplyMessageView,\n      isTyping: someoneElseTyping,\n      onInputTextChanged: notifyTyping\n    }), (0, _jsxRuntime.jsx)(_Button.default, {\n      title: \"\",\n      onPress: testo,\n      children: \" \"\n    })]\n  });\n}\nvar styles = _StyleSheet.default.create({\n  inputContainer: {\n    position: 'relative',\n    flexDirection: 'column-reverse'\n  },\n  replyBarContainer: {\n    height: 'auto'\n  },\n  messagesContainer: {\n    flex: 1\n  },\n  replyMessageContainer: {\n    padding: 8,\n    paddingBottom: 0\n  },\n  replyMessageDivider: {\n    borderBottomWidth: 1,\n    borderBottomColor: 'lightgrey',\n    paddingTop: 6\n  },\n  bigText: {\n    fontSize: 100,\n    fontFamily: \"Futara\",\n    fontWeight: \"bold\"\n  },\n  smallBigText: {\n    fontSize: 40,\n    fontFamily: \"Futara\"\n  },\n  contactListContainer: {\n    position: 'absolute',\n    bottom: 0,\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    backgroundColor: 'red',\n    width: 200\n  },\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: \"purple\"\n  },\n  title: {\n    fontSize: 36,\n    fontWeight: 'bold',\n    color: \"orange\"\n  },\n  input: {\n    backgroundColor: \"red\",\n    height: 58,\n    marginBottom: 20,\n    fontSize: 16,\n    borderRadius: 10,\n    padding: 12\n  },\n  form: {\n    flex: 1,\n    justifyContent: 'center',\n    marginHorizontal: 30\n  },\n  card: {\n    backgroundColor: \"blue\",\n    height: 58,\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 40\n  },\n  buttonText: {\n    fontWeight: \"bold\",\n    color: \"black\",\n    fontSize: 18\n  },\n  button: {\n    backgroundColor: \"blue\",\n    height: 58,\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 40\n  },\n  item: {\n    backgroundColor: '#f9c2ff',\n    padding: 20,\n    marginVertical: 8,\n    marginHorizontal: 16\n  }\n});","map":{"version":3,"names":["_react","_interopRequireWildcard","require","_StyleSheet","_interopRequireDefault","_Text","_View","_Button","_TouchableOpacity","_reactNativeGiftedChat","_firebase","_native","_reactNativeElements","_firestore","_ReplyMessageBar","_jsxRuntime","_jsxFileName","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","Chat","_ref","_route$params","_this","_auth$currentUser3","_auth$currentUser4","navigation","route","useRoute","_useState","useState","_useState2","_slicedToArray2","someoneElseTyping","setSomeoneElseTyping","_useState3","_useState4","messages","setMessages","_useState5","_useState6","replyMessage","setReplyMessage","_useState7","_useState8","showEmojiPicker","setShowEmojiPicker","clearReplyMessage","cid","params","renderReplyMessageView","props","currentMessage","jsxs","style","styles","replyMessageContainer","children","jsx","replyMessageDivider","renderAccessory","message","text","clearReply","useLayoutEffect","collectionRef","collection","database","quer","query","orderBy","unsubscribe","onSnapshot","snapshot","docs","map","doc","_id","id","createdAt","data","toDate","user","isSomeoneElseTyping","forEach","_auth$currentUser","console","log","isTyping","auth","currentUser","uid","onSend","useCallback","arguments","length","undefined","previousMessages","GiftedChat","append","_messages$","addDoc","notifyTyping","args","_auth$currentUser2","docRef","setDoc","testo","_testo","apply","_asyncToGenerator2","docSnap","getDoc","typerRef","exists","renderSend","flexDirection","Send","assign","sendContainer","Icon","type","name","size","color","onPress","value","Fragment","email","renderUsernameOnMessage","_","renderCustomView","onInputTextChanged","title","StyleSheet","create","inputContainer","position","replyBarContainer","height","messagesContainer","flex","padding","paddingBottom","borderBottomWidth","borderBottomColor","paddingTop","bigText","fontSize","fontFamily","fontWeight","smallBigText","contactListContainer","bottom","justifyContent","backgroundColor","width","container","alignItems","input","marginBottom","borderRadius","form","marginHorizontal","card","marginTop","buttonText","button","item","marginVertical"],"sources":["/home/joshua/sana-app/sana/screens/Chat.js"],"sourcesContent":["import React, {useState, useEffect, useLayoutEffect, useCallback} from \"react\";\nimport {StyleSheet, Text, View, Button, TouchableOpacity} from \"react-native\";\nimport { GiftedChat, Send } from \"react-native-gifted-chat\";\nimport {auth, database} from '../config/firebase';\nimport {useRoute } from \"@react-navigation/native\";\nimport { Icon } from 'react-native-elements';\nimport {collection, setDoc, getDoc, addDoc, doc, updateDoc, orderBy, query, onSnapshot, increment} from 'firebase/firestore';\n\nimport ReplyMessageBar from '../components/ReplyMessageBar';\n\nexport default function Chat({navigation}) {\n    const route = useRoute()\n    \n    const [someoneElseTyping, setSomeoneElseTyping] = useState(0);\n    const [messages, setMessages] = useState([]);\n    const [replyMessage, setReplyMessage] = useState([]);\n    const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n    const clearReplyMessage = () => setReplyMessage(null);\n    const cid = route.params?.cid;\n    \n\n\n    const renderReplyMessageView = (props) => {\n        if (typeof props.currentMessage.replyMessage == 'string'){\n          return (\n              <View style={styles.replyMessageContainer}>\n                <Text>{props.currentMessage.replyMessage}</Text>\n                <View style={styles.replyMessageDivider} />\n              </View>\n            );\n        }\n    }\n\n    const renderAccessory = () => (\n        <ReplyMessageBar message = {{text:replyMessage}} clearReply={clearReplyMessage}/>\n    );\n    \n    /* \n     * Retreives the messages for this chat everytime someone sends one \n     * */\n\n    useLayoutEffect(() => {\n        const collectionRef = collection(database, \"chat\", cid, \"chat\");\n        const quer = query(collectionRef, orderBy('createdAt', 'desc'));\n            \n        const unsubscribe = onSnapshot(quer, snapshot => {\n        setMessages(\n            snapshot.docs.map(doc => ({\n                _id: doc.id,\n                createdAt: doc.data().createdAt.toDate(),\n                text: doc.data().text,\n                user: doc.data().user,\n                replyMessage: doc.data().replyMessage,\n            }))\n        )\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    /*\n     * Receive data on who is typing\n     */\n\n    useLayoutEffect(() => {\n        const collectionRef = collection(database, \"chat\", cid, \"typers\");\n        const quer = query(collectionRef);\n\n        const unsubscribe = onSnapshot(quer, snapshot => {\n            var isSomeoneElseTyping = false; \n            snapshot.docs.forEach(doc => {\n                console.log(doc.data().isTyping + \" \" + doc.id); \n                isSomeoneElseTyping |= (doc.data().isTyping && doc.id != auth?.currentUser?.uid)\n            });\n            setSomeoneElseTyping(isSomeoneElseTyping);\n        });\n        \n        return unsubscribe;\n    }, []);\n        \n    /* \n     * update database when a message is sent\n     * */\n\n    const onSend = useCallback((messages= []) => {\n        if (replyMessage){\n            messages[0].replyMessage = replyMessage;\n        }\n        \n        setMessages(previousMessages => GiftedChat.append(previousMessages, messages));\n        const {_id, createdAt, text, user} = messages[0];\n\n        addDoc(collection(database, 'chat', cid, \"chat\"), {\n            _id, createdAt, text, user, replyMessage\n        });\n    });\n        \n    /* \n     * update database when someone you typing\n     * */\n\n    const notifyTyping = args => {\n        const docRef = doc(database, \"chat\", cid, \"typers\", auth?.currentUser?.uid);\n        if (args != \"\") \n            setDoc(docRef, {\n                isTyping: 1,\n            });\n        else \n            setDoc(docRef, { \n            isTyping: 0 \n            });\n    }\n\n    async function testo() {\n        const docSnap = await getDoc(typerRef);\n         \n        if (docSnap.exists()) {\n        }\n    }\n\n    const renderSend = (props) => {\n      return (\n            <View style={{flexDirection: 'row'}}>\n                <Send {...props}>\n                <View style={styles.sendContainer}>\n                  <Icon\n                    type=\"font-awesome\"\n                    name=\"send\"\n                    size={28}\n                    color='orange'\n                  />\n                </View>\n                </Send>\n\n                <TouchableOpacity onPress={() => setShowEmojiPicker((value) => value)}>\n                    <Icon\n                      type=\"font-awesome\"\n                      name=\"smile-o\"\n                      size={28}\n                      color='gray'/>\n                </TouchableOpacity>\n            </View>\n        );\n    }; \n       \n\n    return (\n        <>\n        <GiftedChat\n            messages={messages}\n            onSend={messages => onSend(messages)}\n            user={{\n                _id: auth?.currentUser?.email,\n                name:auth?.currentUser?.email,\n            }}\n            renderUsernameOnMessage={true}\n            renderSend={renderSend}\n            onPress = {(_, message) => setReplyMessage(message.text)}\n            renderAccessory = {renderAccessory}\n            renderCustomView={renderReplyMessageView}\n            isTyping={someoneElseTyping}\n            onInputTextChanged={notifyTyping}\n        />\n        <Button title=\"\" onPress={testo}> </Button>\n        </>\n        \n    )\n        }\n\nconst styles = StyleSheet.create({\n    \n  inputContainer: {\n    position: 'relative',\n    flexDirection: 'column-reverse',\n  },\n  replyBarContainer: {\n    height: 'auto',\n  },\n  messagesContainer: {\n    flex: 1,\n  },\n  replyMessageContainer: {\n    padding: 8,\n    paddingBottom: 0,\n  },\n  replyMessageDivider: {\n    borderBottomWidth: 1,\n    borderBottomColor: 'lightgrey',\n    paddingTop: 6,\n  },\n    bigText:{\n        fontSize: 100,\n        fontFamily: \"Futara\",\n        fontWeight: \"bold\",\n    },\n    smallBigText:{\n        fontSize: 40,\n        fontFamily: \"Futara\",\n    },\n    contactListContainer:{\n        position: 'absolute',\n        bottom: 0,\n        flexDirection: 'column',\n        justifyContent: 'space-between',\n        backgroundColor:'red',\n        width: 200 // add width \n    },\n    container: {\n        flex:1,\n        alignItems: 'center', \n        justifyContent: 'center',\n        backgroundColor: \"purple\"\n    },\n    title: {\n        fontSize:36,\n        fontWeight: 'bold',\n        color: \"orange\",\n    },\n    input: {\n        backgroundColor: \"red\",\n        height: 58,\n        marginBottom: 20,\n        fontSize: 16,\n        borderRadius: 10,\n        padding: 12,\n    },\n    form: {\n        flex:1,\n        justifyContent: 'center',\n        marginHorizontal: 30,\n    },\n    card: {\n        backgroundColor: \"blue\",\n        height: 58,\n        borderRadius: 10,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 40,\n    },\n    buttonText: {\n        fontWeight: \"bold\",\n        color: \"black\",\n        fontSize: 18,\n    },\n    button: {\n        backgroundColor: \"blue\",\n        height: 58,\n        borderRadius: 10,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginTop: 40,\n    },\n  item: {\n    backgroundColor: '#f9c2ff',\n    padding: 20,\n    marginVertical: 8,\n    marginHorizontal: 16,\n  },\n});\n\n/*\n\n        <TouchableOpacity onPress={() => setShowEmojiPicker((value) => !value)}>\n          <Icon\n          type=\"font-awesome\"\n          name=\"smile-o\"\n          size={28}\n          color='gray'/>\n          </TouchableOpacity>\n          */\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}